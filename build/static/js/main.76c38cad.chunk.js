(this["webpackJsonpusing-pre-built-react-components-completed"]=this["webpackJsonpusing-pre-built-react-components-completed"]||[]).push([[0],{49:function(e,t,n){e.exports=n(81)},81:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(12),c=n.n(r),i=n(19);var s={Base64:"dmc5MmZkZGxuZXJwaXJ2bTllZ2dyOXA2NjpqdjdmMzlpNmZ1Y2RrZ3Nqc2lpM25yOTl0aWdzczBpM3IwZnJxcGhsNWRzMWhuczFrZWs=",client_id:"vg92fddlnerpirvm9eggr9p66",redirect_uri:"https://notes.wootoodoo.com",auth_server:"https://notekeeper-v2.auth.ap-southeast-1.amazoncognito.com"};var l=function(e){return o.a.createElement("header",null,o.a.createElement("div",{className:"container-fluid navbar"},o.a.createElement("h1",{className:"navbar-brand"},"Notekeeper"),e.isLoggedIn&&window.localStorage.name&&o.a.createElement("h2",null,"Logged in as ",window.localStorage.name),e.isLoggedIn?o.a.createElement("a",{href:s.redirect_uri},o.a.createElement("button",{className:"btn btn-outline-dark my-2 my-sm-0 btn-lg",onClick:function(){e.setLoggedIn(!1),localStorage.clear()}},"Logout")):o.a.createElement("a",{href:s.auth_server+"/login?client_id="+s.client_id+"&response_type=code&scope=aws.cognito.signin.user.admin+email+openid+phone+profile&redirect_uri="+s.redirect_uri},o.a.createElement("button",{className:"btn btn-success my-2 my-sm-0 btn-lg"},"Login via Facebook or create an account to persist your notes"))))};var u=function(){const e=(new Date).getFullYear();return o.a.createElement("footer",null,o.a.createElement("a",{href:"https://medium.com/jon-tinkers-with-stuff"},o.a.createElement("button",{className:"btn btn-dark"},"Read more at my blog!")),o.a.createElement("a",{href:"https://wootoodoo.com"},o.a.createElement("button",{className:"btn btn-dark"},"Return to main site")),o.a.createElement("p",null,"Jonathan Lee \u24d2 ",e))},d=n(7),p=n.n(d),m=n(14),g=n(44),w=n.n(g),h=n(15),f=n.n(h);var _=function(e){function t(){return(t=Object(m.a)(p.a.mark((function t(){var n,a,o,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.id,e.onDelete(n),window.localStorage.userId)try{a="?user_id="+window.localStorage.userId,"&operation=delete",o="https://a4m9zicl40.execute-api.ap-southeast-1.amazonaws.com/dev/usernotes"+a+("&note_id="+n)+"&operation=delete",r={headers:{"Content-Type":"application/json","X-Amz-Security-Token":window.localStorage.id_token}},f.a.delete(o,r)}catch(c){console.log(c.message)}case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function n(e){const t=new Date(e),n=t.toDateString();return t.toTimeString().slice(0,5)+"    "+n.slice(8,10)+"-"+n.slice(4,7)+"-"+n.slice(11,15)}return o.a.createElement("div",{className:"note"},o.a.createElement("h1",null,e.title),o.a.createElement("em",null,"Created: ",e.isLoggedIn&&""!==e.id?n(e.id):n(Date.now())),o.a.createElement("p",null,e.content),o.a.createElement("button",{onClick:function(){return t.apply(this,arguments)}},o.a.createElement(w.a,null)))},k=n(24),v=n(45),b=n.n(v),S=n(96),E=n(97);var y=function(e){const t=Object(a.useState)(!1),n=Object(i.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)({title:"",content:"",noteId:""}),l=Object(i.a)(s,2),u=l[0],d=l[1];function g(e){const t=e.target,n=t.name,a=t.value;d(e=>Object(k.a)(Object(k.a)({},e),{},{[n]:a}))}function w(){return(w=Object(m.a)(p.a.mark((function t(n){var a,o,r,c,i;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=(new Date).toJSON(),d(e=>Object(k.a)(Object(k.a)({},e),{},{noteId:a})),e.onAdd(u),window.localStorage.userId)try{o="?user_id="+window.localStorage.userId,"&operation=create",r="https://a4m9zicl40.execute-api.ap-southeast-1.amazonaws.com/dev/usernotes"+o+"&operation=create",c={note_title:u.title,note_time:a,note_content:u.content,user_id:window.localStorage.userId},i={headers:{"Content-Type":"application/json","X-Amz-Security-Token":window.localStorage.id_token}},f.a.post(r,c,i)}catch(s){console.log(s.message)}d({title:"",content:"",noteId:""}),n.preventDefault();case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return o.a.createElement("div",null,o.a.createElement("form",{className:"create-note"},r&&o.a.createElement("input",{name:"title",onChange:g,value:u.title,placeholder:"Title"}),o.a.createElement("textarea",{name:"content",onClick:function(){c(!0)},onChange:g,value:u.content,placeholder:"Take a note...",rows:r?3:1}),o.a.createElement(E.a,{in:r},o.a.createElement(S.a,{onClick:function(e){return w.apply(this,arguments)}},o.a.createElement(b.a,null)))))},I=n(3);var j=function(e){const t=function(){var t=Object(m.a)(p.a.mark((function t(){var n,a,o,r,c;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="?user_id="+window.localStorage.userId,a="&note_time="+(new Date).toJSON(),"&operation=query",o="https://a4m9zicl40.execute-api.ap-southeast-1.amazonaws.com/dev/usernotes"+n+a+"&operation=query",r={headers:{"Content-Type":"application/json","X-Amz-Security-Token":window.localStorage.id_token}},t.next=7,f.a.get(o,r);case 7:c=t.sent,c.data.Items.forEach(t=>{e.getNotes({title:t.note_title,content:t.note_content,noteId:t.note_time})});case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),n=function(){var e=Object(m.a)(p.a.mark((function e(){var t,n,a,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new URLSearchParams).append("grant_type","refresh_token"),t.append("client_id",s.client_id),t.append("refresh_token",window.localStorage.refresh_token),n={headers:{Authorization:"Basic "+s.Base64,"Content-Type":"application/x-www-form-urlencoded"}},e.prev=5,a=s.auth_server+"/oauth2/token",e.next=9,f.a.post(a,t,n);case 9:o=e.sent,window.localStorage.tokenTimeout=Date.now()+1e3*o.data.expires_in,window.localStorage.id_token=o.data.id_token,window.localStorage.access_token=o.data.access_token,window.localStorage.refresh_token=o.data.refresh_token,e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),console.log(e.t0.message);case 19:case"end":return e.stop()}}),e,null,[[5,16]])})));return function(){return e.apply(this,arguments)}}(),a=function(){var e=Object(m.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://a4m9zicl40.execute-api.ap-southeast-1.amazonaws.com/dev/decode",t={headers:{"Content-Type":"application/json","X-Amz-Security-Token":window.localStorage.id_token}},e.prev=2,e.next=5,f.a.get("https://a4m9zicl40.execute-api.ap-southeast-1.amazonaws.com/dev/decode",t);case 5:n=e.sent,console.log(n),window.localStorage.name=n.data.name,window.localStorage.userId=n.data.sub,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(){return e.apply(this,arguments)}}(),o=function(){var e=Object(m.a)(p.a.mark((function e(t,n){var a,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=s.auth_server+"/oauth2/token",e.next=4,f.a.post(a,n,t);case 4:o=e.sent,window.localStorage.tokenTimeout=Date.now()+1e3*o.data.expires_in,window.localStorage.id_token=o.data.id_token,window.localStorage.access_token=o.data.access_token,window.localStorage.refresh_token=o.data.refresh_token,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}();let r=new URLSearchParams(Object(I.d)().search);if(r.get("code")){const c=r.get("code"),i=new URLSearchParams;i.append("grant_type","authorization_code"),i.append("client_id",s.client_id),i.append("code",c),i.append("redirect_uri",s.redirect_uri);const l={headers:{Authorization:"Basic "+s.Base64,"Content-Type":"application/x-www-form-urlencoded"}};window.localStorage.id_token?Date.now()>window.localStorage.tokenTimeout?n().then(a).then(t).then(e.setLoggedIn(!0)):(window.localStorage.userId||a().then(t).then(e.setLoggedIn(!0)),t().then(e.setLoggedIn(!0))):o(l,i).then(a).then(t).then(e.setLoggedIn(!0))}return null},x=n(30);var z=()=>{const e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(!1),s=Object(i.a)(c,2),d=s[0],p=s[1];function m(e){r(t=>[...t,e])}function g(e){r(t=>t.filter((t,n)=>t.noteId!==e))}return o.a.createElement(x.a,null,o.a.createElement("div",null,o.a.createElement(l,{setLoggedIn:p,isLoggedIn:d}),!d&&o.a.createElement(j,{getNotes:m,setLoggedIn:p}),o.a.createElement("body",null,o.a.createElement(y,{onAdd:m,isLoggedIn:d}),n.map((e,t)=>o.a.createElement(_,{key:e.noteId,id:e.noteId,title:e.title,content:e.content,onDelete:g,isLoggedIn:d}))),o.a.createElement(u,null)))};c.a.render(o.a.createElement(z,null),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.76c38cad.chunk.js.map